## Assignment 4
### Creating db and tables

```sql
create database exp4;
```

```sql
use exp4;
```

creating department table
```sql 
    create table Department(
        DepartmentID int not null primary key,
        Name varchar(24) not null
    );
```
creating department student
```sql 
    create table Student(
        StudentID int not null primary key,
        Name varchar(24) not null,
        Age int not null,
        DepartmentID int not null
    );
```
creating department marks
```sql 
    create table Marks(
        MarksID int not null primary key,
        StudentID int not null,
        Subject varchar(24) not null,
        Marks int not null
    );
```
inserting data in department table
```sql 
    insert into Department (DepartmentID,Name) values
    (1,"Computer Science"),
    (2,"Mathematics"),
    (3,"Physics");
```
inserting data in student table
```sql 
    insert into Student (StudentID,Name,Age,DepartmentID) values
    (1,"Amit",20,1),
    (2,"Riya",22,2),
    (3,"Karan",21,1),
    (4,"Neha",23,3),
    (5,"Arjun",20,2);
```
inserting data in marks table
```sql 
    insert into Marks (MarksID,StudentID,Subject,Marks) values
    (1,1,"DBMS",85),
    (2,1,"AI",90),
    (3,2,"DBMS",75),
    (4,2,"AI",80),
    (5,3,"DBMS",88),
    (6,4,"AI",92),
    (7,5,"DBMS",70);
```

### Questions
---
1. Retrieve all students along with their department names.
```sql 
    select s.*,d.Name as DepartmentName
    from Student s
    join Department d
    on s.DepartmentID = d.DepartmentID;
```
---
2. Find the average marks obtained by each student.
```sql 
    select s.Name,avg(m.Marks)
    from Student s
    join Marks m
    on s.StudentID = m.StudentID
    group by s.StudentID;
```
---
3. Find the maximum marks in each subject.
```sql 
    select Subject,max(Marks)
    from Marks
    group by Subject;
```
---
4. List students who scored more than 80 in all subject.
```sql 
    select s.StudentID,s.Name,s.Age,s.DepartmentID
    from Student s
    join Marks m
    on s.StudentID = m.StudentID
    group by s.StudentID, s.Name, s.Age, s.DepartmentID
    having min(m.Marks) > 80;
```
---
5. Retrieve all students ordered by their average marks in descending order.
```sql 
    select s.*,avg(m.Marks) as AverageMarks
    from Student s
    join Marks m
    on s.StudentID = m.StudentID
    group by m.StudentID
    order by AverageMarks desc;
```
---
6. Find the average marks scored by students in each department.
```sql 
    select d.Name as DepartmentName, avg(m.Marks) as AverageMarks
    from Student s
    join Department d on s.DepartmentID = d.DepartmentID
    join Marks m on s.StudentID = m.StudentID
    group by d.DepartmentID;
```
---
7. Display students who have not received any marks yet.
```sql 
    select s.StudentID,s.Name,s.Age,s.DepartmentID
    from Student s
    right join Marks m
    on s.StudentID = m.StudentID
    where m.MarksID is NULL;
```
---
8. Retrieve department names along with the number of students enrolled in each department.
```sql 
    select d.Name as DepartmentName,count(s.StudentID) as Count
    from Student s
    right join Department d 
    on s.DepartmentID = d.DepartmentID
    group by d.DepartmentID;
```
---
9. Find the student with the highest marks in AI subject.
```sql 
    select s.*,m.Marks
    from Student s
    join Marks m
    on s.StudentID = m.StudentID
    where m.Subject = "AI"
    order by m.Marks desc
    limit 1;
```
---
10. Display all students along with their average marks (if any), showing 0 where marks are
not available.
```sql 
    select s.*,coalesce(avg(m.Marks),0) as AvgMarks
    from Student s
    join Marks m
    on s.StudentId = m.StudentID
    group by m.StudentID;
```
---